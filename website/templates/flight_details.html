{% extends 'base.html' %}
{% block content %}

<div class="card">
    <h5 class="card-header">Flight Number {{ flight.FLIGHTNUM }} </h5>
    <div class="card-body">
        <p class="list-group-item">
        <h5>Origin: </h5>{{ flight.ORIGINCITYCODE.CITYCODE }}</p>
        <p class="list-group-item">
        <h5>Departure Time: </h5>{{ flight.DEPTIME }}</p>
        <h5>Intermediate Cities: </h5>
        {% if intermediate_cities %}
        <table class="table table-hover table-sm">
            <thead class="">
                <tr>
                    <th scope="col">Intermediate City</th>
                    <th scope="col">Arrival Time</th>
                    <th scope="col">Departure Time</th>
                </tr>
            </thead>
            <tbody>
                {% for city in intermediate_cities %}
                <tr>
                    <td>{{ city.INTERMEDIATECITYCODE.CITYCODE }} {{ city.INTERMEDIATECITYCODE.CITYNAME }}</td>
                    <td>{{ city.ARRTIME }}</td>
                    <td>{{ city.DEPTIME }}</td>
                    {% if user.is_superuser %}
                    <td><a href="{% url 'delete_intermediate_city' city.STRETCHNUM %}"
                            class="btn btn-outline-danger btn-sm">
                            Remove
                        </a>
                    </td>
                    {% endif %}
                </tr>
                {%endfor%}
            </tbody>
        </table>
        {% endif %}
        {% if user.is_superuser %}
        <a href="{% url 'add_intermediate_city' flight.FLIGHTNUM %}" class="btn btn-outline-success btn-sm">
            Add Intermediate City
        </a>
        {% endif %}
        <p class="list-group-item">
        <h5>Destination: </h5>{{ flight.DESTCITYCODE.CITYCODE }}</p>

        <p class="list-group-item">
        <h5>Arrival Time: </h5>{{ flight.ARRTIME }}</p>
        <p class="list-group-item">
        <h5>Pilot: </h5><a href="{% url 'view_staff_member' flight.PILOTNUM.EMPNUM.EMPNUM %}">
            {{ flight.PILOTNUM.PILOTNUM }} {{ flight.PILOTNUM.EMPNUM.NAME }} {{ flight.PILOTNUM.EMPNUM.SURNAME }} </a>
        </p>
        <p class="list-group-item">
        <h5>Plane: </h5><a href="{% url 'view_plane' flight.PLANENUM.SERIALNUM %}">
            {{ flight.PLANENUM.SERIALNUM }} {{ flight.PLANENUM.MANUFACTURER }} {{ flight.PLANENUM.MODEL }}</a></p>
        <h5>Crew:</h5>
        {% if crew %}
        <table class="table table-hover table-sm">
            <thead class="">
                <tr>
                    <th scope="col">Employee Number</th>
                    <th scope="col">Name</th>
                    <th scope="col">Surname</th>
                </tr>
            </thead>
            <tbody>
                {% for crew_member in crew %}
                <tr>
                    <td><a href="{% url 'view_staff_member' crew_member.EMPNUM.EMPNUM %}">
                            {{ crew_member.EMPNUM.EMPNUM }}
                        </a></td>
                    <td>{{ crew_member.EMPNUM.NAME }}</td>
                    <td>{{ crew_member.EMPNUM.SURNAME }}</td>
                    {% if user.is_superuser %}
                    <td><a href="{% url 'delete_crew' flight.FLIGHTNUM crew_member.EMPNUM.EMPNUM %}"
                            class="btn btn-outline-danger btn-sm">
                            Remove
                        </a>
                    </td>
                    {% endif %}
                </tr>
                {%endfor%}
            </tbody>
        </table>
        {% endif %}
        {% if user.is_superuser %}
        <a href="{% url 'add_crew' flight.FLIGHTNUM %}" class="btn btn-outline-success btn-sm">
            Add Crew
        </a>
        {% endif %}
        <h5>Passengers:</h5>
        {% if passengers %}
        <table class="table table-hover table-sm">
            <thead class="">
                <tr>
                    <th scope="col">Passenger Number</th>
                    <th scope="col">Name</th>
                    <th scope="col">Surname</th>
                </tr>
            </thead>
            <tbody>
                {% for passenger in passengers %}
                <tr>
                    <td><a href="{% url 'view_passenger' passenger.PASSENGERNUM.PASSENGERNUM %}">
                            {{ passenger.PASSENGERNUM.PASSENGERNUM }}
                        </a></td>
                    <td>{{ passenger.PASSENGERNUM.NAME }}</td>
                    <td>{{ passenger.PASSENGERNUM.SURNAME }}</td>
                    {% if user.is_superuser %}
                    <td><a href="{% url 'delete_passenger_booking' flight.FLIGHTNUM passenger.PASSENGERNUM.PASSENGERNUM %}"
                            class="btn btn-outline-danger btn-sm">
                            Remove
                        </a>
                    </td>
                    {% endif %}
                </tr>
                {%endfor%}
            </tbody>
        </table>
        {% endif %}
        {% if user.is_superuser %}
        <a href="{% url 'add_passenger_booking' flight.FLIGHTNUM %}" class="btn btn-outline-success btn-sm">
            Add Passenger
        </a>
        {% endif %}
        <br>
        <br>
        <a href="{% url 'home' %}" class="btn btn-secondary">Back</a>
        {% if user.is_superuser %}
        <a href="{% url 'delete_flight' flight.FLIGHTNUM %}" class="btn btn-danger">Delete</a>
        <a href="{% url 'update_flight' flight.FLIGHTNUM %}" class="btn btn-primary">Update</a>
        {% endif %}
    </div>
</div>

{% endblock %}